<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Hitster</title>
  <meta name="theme-color" content="#000000" />
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="app.css" />
</head>
<body>
  <!-- Close -->
  <button class="close-btn" id="btnClose" aria-label="Schließen">✕</button>

  <!-- START -->
  <main class="screen screen-start" id="screenStart" aria-label="Start">
    <div class="bg" aria-hidden="true"></div>
    <div class="snow" aria-hidden="true"></div>

    <div class="topbar">
      <button class="chip" id="btnLogin" type="button">Spotify Login</button>
      <div class="chip chip-muted" id="loginState">nicht verbunden</div>
    </div>

    <header class="title">
      <div class="neon">HITSTER</div>
      <div class="tagline"><span>DAS MUSIK-PARTYSPIEL</span></div>
    </header>

    <section class="hero" aria-hidden="true">
      <div class="speaker"></div>
    </section>

    <section class="actions">
      <button class="btn btn-primary" id="btnStart" type="button">JETZT SPIELEN</button>
      <button class="btn btn-secondary" id="btnRules" type="button">SPIELREGELN &amp; EINSTELLUNGEN</button>
      <div class="hint" id="hintAuth"></div>
    </section>
  </main>

  <!-- SCAN -->
  <main class="screen screen-scan hidden" id="screenScan" aria-label="Scanner">
    <video id="camera" playsinline></video>
    <canvas id="scanCanvas" class="hidden"></canvas>

    <button class="chip chip-float-left" id="btnSwitchCam" type="button" aria-label="Kamera wechseln">Kamera ↺</button>

    <div class="scan-overlay" aria-hidden="true">
      <div class="scan-top-pill"><span class="dot"></span></div>
      <div class="scan-frame">
        <span class="c tl"></span><span class="c tr"></span>
        <span class="c bl"></span><span class="c br"></span>
      </div>
      <div class="scan-hint" id="scanHint">QR-Code scannen…</div>
    </div>
  </main>

  <!-- PLAYER -->
  <main class="screen screen-player hidden" id="screenPlayer" aria-label="Player">
    <div class="bg" aria-hidden="true"></div>

    <!-- Title reveal (only when scrolled) -->
    <div class="reveal-header" id="revealHeader" aria-hidden="true">
      <div class="reveal-title" id="songTitle"> </div>
      <div class="reveal-artist" id="songArtist"> </div>
    </div>

    <div class="player-scroll" id="playerScroll">
      <div class="player-center">
        <div class="artwrap" aria-label="Artwork">
          <div class="rings"></div>
          <button class="pause" id="btnPause" type="button" aria-label="Play/Pause">Ⅱ</button>
        </div>

        <button class="btn btn-primary wide" id="btnNext" type="button">NÄCHSTE KARTE <span class="arrow">→</span></button>

        <div class="scroll-spacer"></div>
      </div>
    </div>
  </main>

  <!-- Modal -->
  <div class="modal hidden" id="modal">
    <div class="modal-card">
      <div class="modal-title">Spielregeln &amp; Einstellungen</div>
      <div class="modal-text">
        <p><b>1.</b> Einmal <b>Spotify Login</b> drücken (oben).</p>
        <p><b>2.</b> <b>JETZT SPIELEN</b> → Karte scannen → Song startet.</p>
        <p><b>3.</b> Der <b>Titel</b> bleibt verborgen, bis du <b>runterscrollst</b>.</p>
        <p><i>Tipp:</i> Wenn nichts startet, Spotify App kurz öffnen und einen Song abspielen (damit ein Gerät aktiv ist).</p>
      </div>
      <button class="btn btn-secondary" id="btnModalClose" type="button">Schließen</button>
    </div>
  </div>

  <!-- QR lib -->
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
  <script src="app.js"></script>
</body>
</html>
